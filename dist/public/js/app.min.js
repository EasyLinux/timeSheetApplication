!function(){Backbone.View.prototype.remove=function(){return this.$el.empty().off(),this.stopListening(),this},Backbone.View.prototype.close=function(){this.remove(),this.unbind(),this.onClose&&this.onClose()},$.fn.serializeObject=function(){var o={},a=this.serializeArray();return $.each(a,function(){void 0!==o[this.name]?(o[this.name].push||(o[this.name]=[o[this.name]]),o[this.name].push(this.value||"")):o[this.name]=this.value||""}),o}}();var app=app||function(){var api={event_bus:_.extend({},Backbone.Events),views:{},models:{},collections:{},templates:{},content:null,router:null,init:function(){return this.content=$("#container"),$(document).foundation(),window.session=new api.models.Session,Backbone.history.start(),this},changeContent:function(el){return this.content.empty().append(el),this},createTemplate:function(templatePath,data){var templateString=window.JST[templatePath](data);return templateString},resizeFunction:function(elementArray){for(var i=0;i<elementArray.length;i++)$("#"+elementArray[i]+">.verticalParentHeight").each(function(){$(".verticalParent",this).css("height",$(this).height())})}},ViewsFactory={createTemplate:function(templatePath,data){var templateString=window.JST[templatePath](data);return templateString},showView:function(view){this.currentView&&this.currentView.close(),this.currentView=view,this.currentView.render()},login:function(){return this.loginView||(this.loginView=new api.views.login({el:$("#container"),template:this.createTemplate("templates/login.tpl"),model:new api.models.PersonLogin})),this.loginView},home:function(){return this.homeView||(this.homeView=new api.views.home({el:$("#container"),template:this.createTemplate("templates/home.tpl")})),this.homeView},loginCreation:function(){return this.loginCreationView||(this.loginCreationView=new api.views.loginCreation({el:$("#container"),template:this.createTemplate("templates/loginCreation.tpl"),model:new api.models.PersonCreation})),this.loginCreationView},timeSheet:function(){return this.timeSheetView=new api.views.timeSheet({el:$("#container"),template:this.createTemplate("templates/timeSheet.tpl")}),this.timeSheetView},admin:function(){return this.AdminView=new api.views.admin({el:$("#container"),template:this.createTemplate("templates/AdminPanel.tpl"),collection:new api.collections.Persons}),this.AdminView}},HeaderViewFactory={showView:function(view){this.currentView&&this.currentView.close(),this.currentView=view,this.currentView.render()},loggedInHeader:function(data){return this.loggedInHeaderView=new api.views.loggedInHeader({el:$("#headerBar-view"),model:new api.models.Logout,data:data}),this.loggedInHeaderView},loggedOutHeader:function(){return this.loggedOutHeaderView||(this.loggedOutHeaderView=new api.views.loggedOutHeader({el:$("#headerBar-view"),template:api.createTemplate("templates/loggedOutHeader.tpl")})),this.loggedOutHeaderView}},Router=Backbone.Router.extend({routes:{AdminPanel:"admin",timeSheet:"timeSheet",CreateAccount:"loginCreation",login:"login","":"home"},admin:function(){var view=ViewsFactory.admin();ViewsFactory.showView(view)},loginCreation:function(){var view=ViewsFactory.loginCreation();ViewsFactory.showView(view)},login:function(){var view=ViewsFactory.login();ViewsFactory.showView(view)},home:function(){var view=ViewsFactory.home();ViewsFactory.showView(view)},timeSheet:function(){var view=ViewsFactory.timeSheet();ViewsFactory.showView(view)},execute:function(callback,args){var that=this;window.session.fetch({success:function(model,response){var route=Backbone.history.getFragment();if(response.isAuthenticated){var data={FirstName:response.FirstName,LastName:response.LastName},view=HeaderViewFactory.loggedInHeader(data);if(HeaderViewFactory.showView(view),"ADMIN"===response.Role){if(!_.contains(that.requiresAuthAdmin,route))return app.router.navigate("AdminPanel",!0),!1;callback&&callback.apply(this,args)}else{if(!_.contains(that.requiresAuth,route))return app.router.navigate("timeSheet",!0),!1;callback&&callback.apply(this,args)}}else{var view=HeaderViewFactory.loggedOutHeader();if(HeaderViewFactory.showView(view),!_.contains(that.NotRequireAuth,route))return app.router.navigate("login",!0),!1;callback&&callback.apply(this,args)}},error:function(model,response){console.log("There was an error with the server.")}})},requiresAuthAdmin:["AdminPanel"],requiresAuth:["timeSheet"],NotRequireAuth:["CreateAccount","login",""]});return api.router=new Router,api}();app.models.Logout=Backbone.Model.extend({urlRoot:"/logout"}),app.models.Person=Backbone.Model.extend({}),app.models.PersonCreation=Backbone.Model.extend({urlRoot:"/loginCreation",defaults:{AuthToken:"",FirstName:"",LastName:"",Email:"",ConfirmEmail:"",Password:"",ConfirmPassword:""},validation:{AuthToken:[{required:!0},{length:32,pattern:/^[0-9a-fA-F]+$/,msg:"Invalid Authentication Token format"}],FirstName:[{required:!0},{pattern:/^[a-zA-Z]+$/,msg:"Invalid First Name"}],LastName:[{required:!0},{pattern:/^[a-zA-Z]+$/,msg:"Invalid Last Name"}],Email:[{required:!0},{pattern:"email",msg:"Invalid Email"}],ConfirmEmail:[{required:!0},{equalTo:"Email",msg:"Does not match Email"}],Password:[{required:!0},{pattern:/^(?=.*[\d])(?=.*[A-Za-z])[\w\d!?@#$%_]{7,15}$/,msg:"Invalid Password. Must include a digit"}],ConfirmPassword:[{required:!0},{equalTo:"Password",msg:"Does not match Password"}]}}),app.models.PersonLogin=Backbone.Model.extend({urlRoot:"/login",defaults:{Email:"",Password:""},validation:{Email:[{required:!0},{pattern:"email",msg:"Invalid Email"}],Password:{required:!0}}}),app.models.ResendSignupEmail=Backbone.Model.extend({urlRoot:"/resendSignupEmail"}),app.models.Session=Backbone.Model.extend({urlRoot:"/session"}),app.models.TimeSheet=Backbone.Model.extend({idAttribute:"weekStartDate"}),app.models.TokenCreation=Backbone.Model.extend({urlRoot:"/tokenCreation",validation:{Email:[{required:!0},{pattern:"email",msg:"Invalid Email"}],ConfirmEmail:[{required:!0},{equalTo:"Email",msg:"Does not match Email"}]}}),app.collections.Persons=Backbone.Collection.extend({url:"/persons",model:app.models.Person}),app.collections.TimeSheets=Backbone.Collection.extend({url:"/timeSheets",model:app.models.TimeSheet,parse:function(response){return response.results}}),app.views.admin=Backbone.View.extend({initialize:function(data){this.options=data,this.tokenCreationModel=new app.models.TokenCreation,this.template=_.template(this.options.template),Backbone.Validation.bind(this,{model:this.tokenCreationModel,valid:function(view,attr){var element=view.$("[name="+attr+"]"),parent=element.closest(".inputWrapper");element.removeClass("error"),parent.find("small.error").html("").addClass("hidden")},invalid:function(view,attr,error){$("#serverError").html("").addClass("hidden");var element=view.$("[name="+attr+"]"),parent=element.closest(".inputWrapper");element.addClass("error"),parent.find("small.error").html(error).removeClass("hidden")}})},render:function(){var that=this;this.unverifiedPersons=new app.collections.Persons,this.verifiedPersons=new app.collections.Persons,that.$el.html(that.template({})),this.verifiedPersons.fetch({data:{verified:!0},success:function(collection,response,options){that.verifiedCollectionView=new app.views.personCollectionView({collection:that.verifiedPersons,childView:app.views.verifiedUser,el:$("#verifiedUsers-view")}),that.verifiedCollectionView.render()}}),this.unverifiedPersons.fetch({data:{verified:!1},success:function(collection,response,options){that.unverifiedCollectionView=new app.views.personCollectionView({collection:that.unverifiedPersons,childView:app.views.unverifiedUser,el:$("#unverifiedUsers-view")}),that.unverifiedCollectionView.render()}}),this.delegateEvents()},events:{"click .verified.user":"expandUserInfo","click .unverified.user":"expandUserInfo","click #submitCreateUserButton":"createToken"},expandUserInfo:function(element){var toggleElement=$(element.currentTarget).next(".personInfo");0!==$(toggleElement).height()?$(toggleElement).height("0px"):this.fetchUserInfo(toggleElement)},fetchUserInfo:function(toggleElement){var totalHeight=0;$(toggleElement).children().each(function(){totalHeight+=$(this).outerHeight(!0)}),$(toggleElement).height(totalHeight+"px")},createToken:function(){var that=this;event.preventDefault();var data=$("#createUserRequest").serializeObject();this.tokenCreationModel.set(data),this.tokenCreationModel.isValid(!0)&&this.tokenCreationModel.save({Email:data.Email},{success:function(model,response){$("#signupEmailModal").foundation("reveal","open"),$("#serverError").html("").addClass("hidden"),$("#createUserRequest")[0].reset(),that.unverifiedCollectionView.collection.fetch({data:{verified:!1}})},error:function(model,response){$("#serverError").html(response.responseJSON.message).removeClass("hidden")}})}}),app.views.Calendar=Backbone.View.extend({initialize:function(data){this.options=data,this.listenTo(app.event_bus,"inputChange",this.registerInputChange),this.timeSelectorInputChanged=!1,this.selectedWeekId=""},render:function(){this.setElement($(this.options.el));var that=this;$(this.options.el).clndr({render:function(data){return this.template=_.template(app.createTemplate("templates/clndr.tpl",data)),this.template},clickEvents:{onMonthChange:function(month){that.fetchCollection(month,function(err){if(err)return console.log(err);var weekSelectorDate=moment.utc(that.collection.at(0).get("weekStartDate")).format("YYYY-MM-DD");that.renderNextPrevButtons(),that.renderDays(weekSelectorDate)})}}}),this.fetchCollection(this.options.renderWeekStartDate,function(err){that.renderDays(that.options.renderWeekStartDate),that.renderNextPrevButtons(),that.delegateEvents()})},events:{"click .weekDiv":"checkInputWeekSelected","click #changeTimeSheetNo":"unregisterWeekSelected","click #changeTimeSheetYes":"registerWeekSelected"},registerInputChange:function(){this.timeSelectorInputChanged=!0},renderDays:function(weekSelectorDate){var daysContainer=document.getElementById("daysContainer"),startWeekDate=moment.utc(this.collection.at(0).get("weekStartDate")),endWeekDate=moment.utc(this.collection.at(this.collection.length-1).get("weekStartDate"));for(startWeekDate;moment(startWeekDate).isSameOrBefore(endWeekDate);startWeekDate=moment(startWeekDate).add(1,"w")){var weekDiv=document.createElement("div"),weekDivSpan=document.createElement("span"),formattedDate=moment(startWeekDate).format("YYYY-MM-DD"),weekStartDayDiv=document.getElementById(formattedDate);weekDiv.id=formattedDate+"-weekDiv",weekDiv.className="weekDiv";var model=this.collection.find(function(timeSheet){var modelStartDate=moment(timeSheet.get("weekStartDate"));return moment(modelStartDate).isSame(startWeekDate)});model&&(null===model.get("totalTime")?(weekDiv.className+=" incomplete",weekDiv.dataset.date=formattedDate,weekDivSpan.innerHTML="Incomplete"):(weekDiv.className+=" complete",weekDiv.dataset.date=formattedDate,weekDivSpan.innerHTML="Complete")),weekDiv.appendChild(weekDivSpan),daysContainer.appendChild(weekDiv),weekDiv.style.top=weekStartDayDiv.offsetTop+"px",weekDiv.style.left=weekStartDayDiv.offsetLeft+"px"}this.shiftWeekSelector(weekSelectorDate)},checkInputWeekSelected:function(element){this.selectedWeekId=element.currentTarget.id,this.timeSelectorInputChanged?this.setElement($("#changeTimeSheetModal").foundation("reveal","open")):this.registerWeekSelected()},unregisterWeekSelected:function(){$("#changeTimeSheetModal").foundation("reveal","close"),this.setElement($(this.options.el))},registerWeekSelected:function(){$("#changeTimeSheetModal").foundation("reveal","close"),this.setElement($(this.options.el));var weekDiv=document.getElementById(this.selectedWeekId);$(".selected").removeClass("selected"),this.shiftWeekSelector(weekDiv.dataset.date),weekDiv.className+=" selected"},shiftWeekSelector:function(date){this.trigger("timeSelector",date),this.timeSelectorInputChanged=!1;var weekStartDayDiv=document.getElementById(date),weekSelector=document.getElementById("weekSelector"),weekDiv=document.getElementById(date+"-weekDiv");weekDiv.className+=" selected",weekSelector.style.top=weekStartDayDiv.offsetTop+"px",weekSelector.style.left=weekStartDayDiv.offsetLeft+"px"},renderNextPrevButtons:function(){this.options.next?$(".clndr-next-button").removeClass("inactive"):$(".clndr-next-button").addClass("inactive"),this.options.prev?$(".clndr-previous-button").removeClass("inactive"):$(".clndr-previous-button").addClass("inactive")},fetchCollection:function(date,done){var initializedSelectStartDate,initializedSelectEndDate,that=this,prevMonthMonday=document.getElementsByClassName("last-month monday");initializedSelectStartDate=prevMonthMonday.length?prevMonthMonday[0].id:moment(date).startOf("month").format("YYYY-MM-DD");var nextMonthMonday=document.getElementsByClassName("next-month monday");initializedSelectEndDate=nextMonthMonday.length?nextMonthMonday[0].id:moment(date).endOf("month").format("YYYY-MM-DD"),this.collection.fetch({reset:!0,data:{timeSelectorWeekDate:moment(date).startOf("isoWeek").format("YYYY-MM-DD"),selectStartDate:initializedSelectStartDate,selectEndDate:initializedSelectEndDate},success:function(collection,response,options){that.options.next=response.next,that.options.prev=response.prev,done(null)},error:function(collection,response,options){done(err)}})}}),app.views.home=Backbone.View.extend({template:null,initialize:function(data){var resizes=["homeContent"];$(window).resize(_.throttle(function(){app.resizeFunction(resizes)},1e3)),this.options=data,this.template=_.template(this.options.template),this.render()},events:{"click #toLoginPageButton":"toLogin","click #toAccountCreationButton":"toLoginCreation"},render:function(){this.$el.html(this.template({})),this.delegateEvents(),setTimeout(function(){$(window).trigger("resize")},0)},toLogin:function(){app.router.navigate("login",!0)},toLoginCreation:function(){app.router.navigate("CreateAccount",!0)}}),app.views.loggedInHeader=Backbone.View.extend({initialize:function(data){this.options=data},render:function(){this.template=_.template(app.createTemplate("templates/loggedInHeader.tpl",this.options.data)),this.$el.html(this.template({})),this.delegateEvents()},events:{"click #logoutButton":"logout"},logout:function(){this.model.fetch({success:function(model,response){app.router.navigate("login",!0)}})}}),app.views.loggedOutHeader=Backbone.View.extend({template:null,initialize:function(data){this.options=data,this.template=_.template(this.options.template)},render:function(){this.$el.html(this.template({})),this.delegateEvents()}}),app.views.login=Backbone.View.extend({template:null,initialize:function(data){this.options=data,this.template=_.template(this.options.template),this.render(),Backbone.Validation.bind(this,{valid:function(view,attr){var element=view.$("[name="+attr+"]"),parent=element.closest(".inputWrapper");element.removeClass("error"),parent.find("small.error").html("").addClass("hidden")},invalid:function(view,attr,error){$("#serverError").html("").addClass("hidden");var element=view.$("[name="+attr+"]"),parent=element.closest(".inputWrapper");element.addClass("error"),parent.find("small.error").html(error).removeClass("hidden")}})},events:{"click #loginButton":"login","click #homeButton":"home"},render:function(){this.$el.html(this.template({})),this.delegateEvents()},login:function(){event.preventDefault();var data=$("#loginRequest").serializeObject();this.model.set(data),this.model.isValid(!0)&&this.model.save({Email:data.Email,Password:data.Password},{success:function(model,response){app.router.navigate("timeSheet",!0)},error:function(model,response){$("#serverError").html(response.responseJSON.message).removeClass("hidden")}})},home:function(){app.router.navigate("",!0)}}),app.views.loginCreation=Backbone.View.extend({template:null,initialize:function(data){this.options=data,this.template=_.template(this.options.template),this.render(),Backbone.Validation.bind(this,{valid:function(view,attr){var element=view.$("[name="+attr+"]"),parent=element.closest(".inputWrapper");element.removeClass("error"),parent.find("small.error").html("").addClass("hidden")},invalid:function(view,attr,error){$("#serverError").html("").addClass("hidden");var element=view.$("[name="+attr+"]"),parent=element.closest(".inputWrapper");element.addClass("error"),parent.find("small.error").html(error).removeClass("hidden")}})},events:{"click #submitButton":"loginCreation","click #homeButton":"home"},render:function(){this.$el.html(this.template({})),this.delegateEvents()},loginCreation:function(){event.preventDefault();var data=$("#loginCreation").serializeObject();this.model.set(data),this.model.isValid(!0)&&this.model.save({FirstName:data.FirstName,LastName:data.LastName,Email:data.Email,Password:data.Password,AuthToken:data.AuthToken},{success:function(model,response){app.router.navigate("timeSheet",!0)},error:function(model,response){$("#serverError").html(response.responseJSON.message).removeClass("hidden")}})},home:function(){app.router.navigate("",!0)}}),app.views.personCollectionView=Backbone.View.extend({initialize:function(options){this.personView=options.childView,this.personViews={},this.collection.each(this.add,this),this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"remove",this.removePerson)},add:function(person){var personView=this.personViews[person.id]||new this.personView({model:person});this.listenTo(personView,"remove",this.removePerson),this.personViews[person.id]=personView,this.rendered&&$(this.el).append(personView.render().el)},removePerson:function(person){var viewToRemove=this.personViews[person.id];viewToRemove.close()},render:function(){this.rendered=!0,this.collection.each(function(person){this.$el.append(this.personViews[person.id].render().el)},this)}}),this.JST=this.JST||{},this.JST["templates/AdminPanel.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div id="adminTemplate">\n  <div class="row small-collapse medium-uncollapse">\n    <div class="small-12 medium-10 small-centered columns">\n      <div id="adminContent">\n        <div class="row small-collapse medium-uncollapse">\n          <div class="small-12 medium-5 large-5 columns">\n            <img src="images/logoWithText.jpg"/>\n            <div id="adminPanelTitle">\n              Adminstration Panel\n            </div>\n          </div>\n          <div class="small-12 medium-7 large-7 columns">\n            <div class="subSectionTitle">\n              Token Generation:\n            </div>\n            <form id="createUserRequest">\n              <div class="row small-collapse medium-uncollapse">\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="email" type="text" name="Email" placeholder="Email">\n                    <small class="error hidden"></small>\n                  </div>\n                </div>\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="confirmEmail" type="text" name="ConfirmEmail" placeholder="Confirm Email">\n                    <small class="error hidden"></small>\n                  </div>\n                </div>\n              </div>\n              <div class="row small-collapse medium-uncollapse">\n                <div class="small-12 small-centered columns">\n                  <button id="submitCreateUserButton" class="button round expand" type="button">Send Token</button>\n                </div>\n              </div>\n              <div class="row small-collapse medium-uncollapse">\n                <div class="small-12 columns">\n                  <div class="hidden" id="serverError">\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n        <div class="subSectionTitle users">\n            Verified users:\n        </div>\n        <div id="verifiedUsers-view">\n        </div>\n        <div class="subSectionTitle users">\n          Unverified users:\n        </div>\n        <div id="unverifiedUsers-view">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="deleteModal" class="reveal-modal small" data-reveal data-options="close_on_background_click:false">\n  <div class="row">\n    <div class="small-8 small-centered columns">\n      <p>Are you sure?</p>\n    </div>\n    <div class="small-6 columns">\n        <button id="deleteNo" class="button expand" type="button">No</button>\n    </div>\n    <div class="small-6 columns">\n        <button id="deleteYes" class="button expand" type="button">Yes</button>\n    </div>\n  </div>\n</div>\n<div id="signupEmailModal" class="reveal-modal small" data-reveal>\n  <h4>Successful token creation!</h4>\n  A token has been generated and sent the to the supplied email address.\n  <a class="close-reveal-modal" aria-label="Close">&#215;</a>\n</div>\n<div id="resendSignupEmailModal" class="reveal-modal small" data-reveal>\n  <h4>Resent authentication token!</h4>\n  A new email with the user\'s authentication token has been sent.\n  <a class="close-reveal-modal" aria-label="Close">&#215;</a>\n</div>\n\n\n';return __p},this.JST["templates/adminPersonTimeSheetWeek.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="";return __p},this.JST["templates/clndr.tpl"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="clndr-controls">\n  <div class="clndr-previous-button">&lsaquo;</div><!--\n   --><div class="month">'+(null==(__t=month)?"":__t)+'</div><!--\n   --><div class="clndr-next-button">&rsaquo;</div>\n</div>\n<div class="clndr-grid">\n  <div class="days-of-the-week clearfix">\n    ',_.each(daysOfTheWeek,function(day){__p+='\n      <div class="header-day">'+(null==(__t=day)?"":__t)+"</div>\n    "}),__p+='\n  </div>\n  <div class="days clearfix" id="daysContainer">\n    <div id="weekSelector"></div>\n    ',_.each(days,function(day){var monday=moment(day.date).isSame(moment(day.date).startOf("isoweek"));__p+='\n      <div class="'+(null==(__t=monday?day.classes+" monday":day.classes)?"":__t)+'" id="'+(null==(__t=moment(day.date).format("YYYY-MM-DD"))?"":__t)+'">\n        <span class="day-number">'+(null==(__t=day.day)?"":__t)+"</span>\n      </div>\n    "}),__p+='\n  </div>\n</div>\n<div id="changeTimeSheetModal" class="reveal-modal small" data-reveal data-options="close_on_background_click:false">\n  <div class="row">\n    <div class="small-12 small-centered columns">\n      <p>You have made changes to this timesheet and not submitted. If you change to a different timesheet your input will be lost. Are you sure you wish to proceed?</p>\n    </div>\n    <div class="small-6 columns">\n        <button id="changeTimeSheetNo" class="button expand" type="button">No</button>\n    </div>\n    <div class="small-6 columns">\n        <button id="changeTimeSheetYes" class="button expand" type="button">Yes</button>\n    </div>\n  </div>\n</div>';return __p},this.JST["templates/home.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div id="homeTemplate">\n  <div class="row">\n    <div class="small-12 medium-8 large-6 small-centered columns">\n      <div id="homeContent">\n        <div class="row">\n          <div class="small-12 medium-6 large-6 columns">\n            <img src="images/logoWithText.jpg"/>\n            <div id="homeTitle">\n              Timesheet Application\n            </div>\n          </div>\n          <div class="small-12 medium-6 large-6 columns buttons">\n            <button id="toLoginPageButton" class="button round expand" type="submit">Login</button>\n            <button id="toAccountCreationButton" class="button round expand" type="submit">Create Account</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';return __p},this.JST["templates/loggedInHeader.tpl"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div id="top-user-info" style="float: left;">\n    Welcome '+(null==(__t=FirstName)?"":__t)+" "+(null==(__t=LastName)?"":__t)+'!\n</div>\n<div style="float: right;">\n    <button id="logoutButton" class="button round expand" type="submit">Logout</button>\n</div>';return __p},this.JST["templates/loggedOutHeader.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<a href="tel:843-277-0493" class="top-contact-info" style="padding-right: 1em;">\n    <i class="fa fa-phone"></i>\n    <span id="contactPhone">\n        843-277-0493\n    </span>\n</a>\n<a href="mailto:info@elevationhealthcare.com" class="top-contact-info"> <i class="fa fa-envelope"></i>\n    <span id="contactEmail">\n        info@elevationhealthcare.com\n    </span>\n</a>\n<div style="float: right;">\n    <a target="_blank" href="https://www.facebook.com/ElevationHealthcare" class="top-social-icon">\n        <i class="fa fa-facebook"></i>\n    </a>\n    <a target="_blank" href="https://www.linkedin.com/company/elevation-healthcare" class="top-social-icon">\n        <i class="fa fa-linkedin"></i>\n    </a>\n    <a target="_blank" href="https://plus.google.com/113418667459138730721/about?hl=en" class="top-social-icon">\n        <i class="fa fa-google-plus"></i>\n    </a>\n    <a target="_blank" href="https://twitter.com/elevathealth" class="top-social-icon">\n        <i class="fa fa-twitter"></i>\n    </a>\n</div>';return __p},this.JST["templates/login.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div id="loginTemplate">\n  <div class="row">\n    <div class="small-12 medium-10 large-10 small-centered columns">\n      <div class="row">\n        <div class="small-12 medium-6 large-6 small-centered columns">\n          <div id="loginContent">\n            <div class="row">\n              <div class="small-4 medium-3 large-4 columns">\n                <button id="homeButton" class="button round expand" type="button">\n                  <i id="homeIcon" class="fa fa-home"></i>\n                </button>\n              </div>\n              <div class="small-8 medium-9 large-8 columns">\n                <span id="loginIntroText">\n                  Already have a login? Great! Sign in below.\n                </span>\n              </div>\n            </div>\n            <form id="loginRequest">\n              <div class="inputWrapper">\n                <input id="email" type="text" name="Email" placeholder="Email">\n                <small class="error hidden"></small>\n              </div>\n              <div class="inputWrapper">\n                <input id="password" type="password" name="Password" placeholder="Password">\n                <small class="error hidden"></small>\n              </div>\n              <div class="row">\n                <div class="small-12 small-centered columns">\n                  <button id="loginButton" class="button round expand" type="button">Login</button>\n                </div>\n              </div>\n              <div class="row">\n                <div class="small-12 columns">\n                  <div class="hidden" id="serverError">\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';return __p},this.JST["templates/loginCreation.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div id="loginCreationTemplate">\n  <div class="row">\n    <div class="small-12 medium-10 large-10 small-centered columns">\n      <div class="row">\n        <div class="small-12 columns">\n          <div id="loginCreationContent">\n            <div class="row">\n              <div class="small-12 medium-2 large-2 columns">\n                <button id="homeButton" class="button round expand" type="button">\n                  <i id="homeIcon" class="fa fa-home"></i>\n                </button>\n              </div>\n              <div class="small-12 medium-10 large-10 columns">\n                <span id="loginIntroText">\n                  Don\'t have login yet? No problem! Provide your authentication key and fill in the information below to get started.\n                </span>\n              </div>\n            </div>\n            <form id="loginCreation">\n              <div class="row">\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="firstName" type="text" name="FirstName" placeholder="First Name" />\n                    <small class=\'error hidden\'></small>\n                  </div>\n                </div>\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="lastName" type="text" name="LastName" placeholder="Last Name" />\n                    <small class=\'error hidden\'></small>\n                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="email" type="text" name="Email" placeholder="Email" />\n                    <small class=\'error hidden\'></small>\n                  </div>\n                </div>\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="emailConfirm" type="text" name="ConfirmEmail" placeholder="Confirm Email" />\n                    <small class=\'error hidden\'></small>\n                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="password" type="password" name="Password" placeholder="Password (Must Include a digit)" />\n                    <small class=\'error hidden\'></small>\n                  </div>\n                </div>\n                <div class="small-12 medium-6 large-6 columns">\n                  <div class="inputWrapper">\n                    <input id="passwordConfirmation" type="password" name="ConfirmPassword" placeholder="Confirm Password" />\n                    <small class=\'error hidden\'></small>\n                  </div>\n                </div>\n              </div>\n              <div class="inputWrapper">\n                <input id="authKey" type="text" name="AuthToken" placeholder="Authentication Key" />\n                <small class=\'error hidden\'></small>\n              </div>\n              <button id="submitButton" class="button round expand">Create</button>\n              <div class="row">\n                <div class="small-12 columns">\n                  <div class="hidden" id="serverError">\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';return __p},this.JST["templates/timeSelector.tpl"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div id="timePickersCover"></div>\n<div id="timePickerHeader">\n  <div class="row small-collapse medium-uncollapse border">\n    <div class="small-12 small-cenetered columns">\n      Week of ('+(null==(__t=moment(weekStartDate).format("MM/DD/YYYY"))?"":__t)+") to ("+(null==(__t=moment(weekStartDate).add(4,"d").format("MM/DD/YYYY"))?"":__t)+'):\n    </div>\n  </div>\n</div>\n<div id="timePickersWrapper">\n</div>\n<div class="border" id="totalTimeWrapper">\n  <div class="row small-collapse medium-uncollapse">\n    <div class="small-9 medium-10 columns" id="totalTimeText">\n      Total Time:\n    </div>\n    <div class="small-2 columns" id="totalTime">'+(null==(__t=null!==totalTime?totalTime:0)?"":__t)+'</div>\n  </div>\n</div>\n<div id="buttonsWrapper">\n  <div class="row small-collapse medium-uncollapse">\n    <div class="medium-8 small-12 columns">\n      <button id="submitTimeSheetPhoto" class="button round expand" type="submit">Upload TimeSheet Photo</button>\n    </div>\n    <div class="medium-4 small-12 columns">\n      <button id="toAccountCreationButton" class="button round expand" type="submit">Submit</button>\n    </div>\n  </div>\n</div>';
return __p},this.JST["templates/timeSelectorDay.tpl"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div id="timeselectors-'+(null==(__t=formattedDate)?"":__t)+'" class="row small-collapse medium-uncollapse margin-bottom border">\n  <div class="small-12 columns">'+(null==(__t=moment(date).format("dddd"))?"":__t)+" ("+(null==(__t=moment(date).format("MM/DD/YYYY"))?"":__t)+')</div>\n  <div class="small-10 columns">\n    <div class="row small-collapse">\n      <div class="small-5 medium-2 columns morning">\n        <input id="morning-login" class="input-'+(null==(__t=formattedDate)?"":__t)+'" type="text" id="example" placeholder="Login"/>\n      </div>\n      <div class="small-1 medium-1 columns morning dash"> - </div>\n      <div class="small-5 medium-2 columns morning">\n        <input id="morning-logout" class="input-'+(null==(__t=formattedDate)?"":__t)+'" type="text" id="example" placeholder="Logout"/>\n      </div>\n      <div class="small-5 medium-2 medium-offset-1 columns afternoon">\n        <input id="afternoon-login" class="input-'+(null==(__t=formattedDate)?"":__t)+'" type="text" id="example" placeholder="Login"/>\n      </div>\n      <div class="small-1 medium-1 columns afternoon dash"> - </div>\n      <div class="small-5 medium-2 columns afternoon end">\n        <input id="afternoon-logout" class="input-'+(null==(__t=formattedDate)?"":__t)+'" type="text" id="example" placeholder="Logout"/>\n      </div>\n    </div>\n  </div>\n  <div id="totalHours-'+(null==(__t=formattedDate)?"":__t)+'" class="small-2 columns hours">\n    '+(null==(__t=time)?"":__t)+"\n  </div>\n</div>";return __p},this.JST["templates/timeSheet.tpl"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div id="timeSheetTemplate">\n  <div class="row">\n    <div class="small-12 small-centered columns">\n      <div id="timeSheetContent">\n        <div class="row small-collapse medium-uncollapse">\n          <div class="small-12 medium-6 medium-push-6 columns">\n            <div id="clndr-view">\n            </div>\n          </div>\n          <div class="small-12 medium-6 medium-pull-6 columns">\n            <div id="timeSelector-view">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';return __p},this.JST["templates/unverifiedUser.tpl"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="userBlock">\n  <button class="unverified user" type="button" data-id="'+(null==(__t=person.id)?"":__t)+'">'+(null==(__t=person.Email)?"":__t)+'</button>\n  <div class="personInfo">\n    <div class="row unverifiedRow">\n      <div class="small-12 medium-12 large-8 columns authTokenClass">\n        Authentication Token: '+(null==(__t=person.id)?"":__t)+'\n      </div>\n      <div class="small-12 medium-12 large-4 columns">\n        <div class="buttonDiv">\n          <button class="button round resendButton" >Resend Email</button>\n          <button class="button round deleteButton" >Delete</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';return __p},this.JST["templates/verifiedUser.tpl"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="userBlock">\n  <button class="verified user" type="button" data-id="'+(null==(__t=person.id)?"":__t)+'">\n    '+(null==(__t=person.FirstName)?"":__t)+"  "+(null==(__t=person.LastName)?"":__t)+'\n  </button>\n  <div class="personInfo">\n    <div class="personalInformationDiv">\n      <div class="personalTitle">\n        Personal Information:\n      </div>\n      <div class="personalInformation">\n        <div class="row">\n          <div class="small-12 medium-6 large-6 columns">\n            Email: '+(null==(__t=person.Email)?"":__t)+'\n          </div>\n          <div class="small-12 medium-6 large-6 columns">\n            Role: '+(null==(__t=person.Role)?"":__t)+'\n          </div>\n          <div class="small-12 columns authTokenClass">\n            Authentication Token: '+(null==(__t=person.id)?"":__t)+'\n          </div>\n          <div class="small-12 columns">\n            <div class="buttonDiv">\n              <button class="button round deleteButton" >Delete</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="timeSheetInfo-view">\n      <div class="personalTitle">\n        Time Sheets:\n      </div>\n    </div>\n  </div>\n</div>';return __p},app.views.TimeSelector=Backbone.View.extend({initialize:function(data){this.options=data,this.dayIds=["mondayTime","tuesdayTime","wednesdayTime","thursdayTime","fridayTime"],this.listenTo(app.event_bus,"totalTime",this.computeTotalTime),this.timeSelectorDayViews={}},render:function(){this.template=_.template(app.createTemplate("templates/timeSelector.tpl",{weekStartDate:this.model.get("weekStartDate"),totalTime:this.model.get("totalTime")})),$(this.options.el).html(this.template({}));for(var i=0;i<this.dayIds.length;i++)this.timeSelectorDayViews[i]=new app.views.TimeSelectorDay({el:"#timePickersWrapper",data:{time:this.model.get(this.dayIds[i]),date:moment(this.model.get("weekStartDate")).add(i,"d")}}).render();$("input").timepicker({noneOption:!0,step:15,disableTouchKeyboard:!0,disableTextInput:!0}),this.checkTotalTime()>0&&this.handlePreviouslySubmitted(),this.delegateEvents()},checkTotalTime:function(){var totalTimeDiv=document.getElementById("totalTime"),totalTime=parseFloat(totalTimeDiv.innerHTML);return totalTime>0?totalTimeDiv.style.backgroundColor="#69a776":totalTimeDiv.style.backgroundColor="#dd3c3c",totalTime},computeTotalTime:function(){for(var totalTime=0,i=0;i<this.dayIds.length;i++)totalTime+=this.timeSelectorDayViews[i].totalHours;document.getElementById("totalTime").innerHTML=totalTime,this.checkTotalTime()},handlePreviouslySubmitted:function(){var coverDiv=document.getElementById("timePickersCover"),coverInnerDiv=document.createElement("div"),coverInnerDivSpan=document.createElement("div"),resubmissionButton=document.createElement("button");coverDiv.className="active",resubmissionButton.innerHTML="Request Review",resubmissionButton.className="expand",coverInnerDivSpan.innerHTML=alreadySubmittedInfo,coverInnerDiv.appendChild(coverInnerDivSpan),coverInnerDiv.appendChild(resubmissionButton),coverDiv.appendChild(coverInnerDiv)}});var alreadySubmittedInfo="This timesheet has already been submitted. If you would like to resubmit please request a review.";app.views.TimeSelectorDay=Backbone.View.extend({initialize:function(data){this.options=data,this.options.data.formattedDate=moment(this.options.data.date).format("YYYY-MM-DD"),this.events=this.events||{};var inputEventKey="change .input-"+this.options.data.formattedDate;this.events[inputEventKey]="inputCheck",this.totalHours=0},render:function(){return this.template=_.template(app.createTemplate("templates/timeSelectorDay.tpl",this.options.data)),$(this.options.el).append(this.template({})),this.delegateEvents(),this.checkTotalTime(),this},inputCheck:function(){var totalTimeDiv=document.getElementById("totalHours-"+this.options.data.formattedDate),totalTime=0,morningLoginHour=$("#timeselectors-"+this.options.data.formattedDate+" #morning-login").val(),morningLogoutHourElement=$("#timeselectors-"+this.options.data.formattedDate+" #morning-logout");morningLoginHour&&morningLogoutHourElement.timepicker("option",{minTime:morningLoginHour});var morningLogoutHour=morningLogoutHourElement.val(),morningHours=moment(morningLogoutHour,"LT").diff(moment(morningLoginHour,"LT"),"h",!0);morningHours>=0&&(totalTime+=morningHours);var afternoonLoginHour=$("#timeselectors-"+this.options.data.formattedDate+" #afternoon-login").val(),afternoonLogoutHourElement=$("#timeselectors-"+this.options.data.formattedDate+" #afternoon-logout");afternoonLoginHour&&afternoonLogoutHourElement.timepicker("option",{minTime:afternoonLoginHour});var afternoonLogoutHour=afternoonLogoutHourElement.val(),afternoonHours=moment(afternoonLogoutHour,"LT").diff(moment(afternoonLoginHour,"LT"),"h",!0);afternoonHours>=0&&(totalTime+=afternoonHours),totalTimeDiv.innerHTML=totalTime,this.checkTotalTime(),app.event_bus.trigger("totalTime"),app.event_bus.trigger("inputChange")},checkTotalTime:function(){var totalTimeDiv=document.getElementById("totalHours-"+this.options.data.formattedDate),totalTime=parseFloat(totalTimeDiv.innerHTML);totalTime>0?totalTimeDiv.style.backgroundColor="#69a776":totalTimeDiv.style.backgroundColor="#dd3c3c",this.totalHours=totalTime}}),app.views.timeSheet=Backbone.View.extend({template:null,initialize:function(data){var initializedWeekStartDate=moment().startOf("isoWeek").format("YYYY-MM-DD");this.options=data,this.template=_.template(this.options.template),this.timeSheets=new app.collections.TimeSheets,this.calendarView=new app.views.Calendar({el:"#clndr-view",renderWeekStartDate:initializedWeekStartDate,collection:this.timeSheets}),this.listenTo(this.calendarView,"timeSelector",this.renderTimeSelector)},render:function(){moment().startOf("isoWeek").format("YYYY-MM-DD");this.$el.html(this.template({})),this.calendarView.render(),this.delegateEvents()},renderTimeSelector:function(date){var model=this.timeSheets.find(function(timeSheet){var modelStartDate=moment.utc(timeSheet.get("weekStartDate")).format("YYYY-MM-DD");return moment(modelStartDate).isSame(date)});this.timeSelectorView&&this.timeSelectorView.close(),this.timeSelectorView=new app.views.TimeSelector({el:"#timeSelector-view",model:model}),this.timeSelectorView.render()}}),app.views.unverifiedUser=Backbone.View.extend({initialize:function(data){this.options=data,this.resendSignupEmailModel=new app.models.ResendSignupEmail},render:function(){return this.template=_.template(app.createTemplate("templates/unverifiedUser.tpl",{person:this.model.attributes})),this.$el.html(this.template({})),this.delegateEvents(),this},events:{"click .deleteButton":"delete","click .resendButton":"resendSignupEmail"},"delete":function(){function modalListenerCleanup(){$(document).off("opened.fndtn.reveal"),$("#deleteYes").off("click"),$("#deleteNo").off("click")}var that=this;$("#deleteModal").foundation("reveal","open"),$(document).on("opened.fndtn.reveal","#deleteModal[data-reveal]",function(){$("#deleteYes").click(function(){that.model.destroy(),$("#deleteModal[data-reveal]").foundation("reveal","close"),modalListenerCleanup()}),$("#deleteNo").click(function(event){$("#deleteModal[data-reveal]").foundation("reveal","close"),modalListenerCleanup()})})},resendSignupEmail:function(){this.resendSignupEmailModel.save({Email:this.model.get("Email"),Token:this.model.get("id")},{success:function(model,response){$("#resendSignupEmailModal").foundation("reveal","open")},error:function(model,response){}}),console.log()}}),app.views.verifiedUser=Backbone.View.extend({initialize:function(data){this.options=data},render:function(){return this.template=_.template(app.createTemplate("templates/verifiedUser.tpl",{person:this.model.attributes})),this.$el.html(this.template({})),this.delegateEvents(),this},events:{"click .deleteButton":"delete"},"delete":function(){function modalListenerCleanup(){$(document).off("opened.fndtn.reveal"),$("#deleteYes").off("click"),$("#deleteNo").off("click")}var that=this;$("#deleteModal").foundation("reveal","open"),$(document).on("opened.fndtn.reveal","#deleteModal[data-reveal]",function(){$("#deleteYes").click(function(){that.model.destroy(),$("#deleteModal[data-reveal]").foundation("reveal","close"),modalListenerCleanup()}),$("#deleteNo").click(function(event){$("#deleteModal[data-reveal]").foundation("reveal","close"),modalListenerCleanup()})})}});